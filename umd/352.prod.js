"use strict";(self.webpackChunktinode_webapp=self.webpackChunktinode_webapp||[]).push([[352],{2352:function(e,t,a){a.r(t);var s=a(1594),l=a.n(s),n=a(8181),i=a(1166),o=a(1485),r=a(6235);const d=(0,n.defineMessages)({delete_account:{id:"delete_account",defaultMessage:[{type:0,value:"Delete account"}]},delete_account_warning:{id:"delete_account_warning",defaultMessage:[{type:0,value:"Are you sure you want to delete your account? It cannot be undone."}]}});class c extends l().Component{constructor(e){super(e);const t=this.props.tinode.getMeTopic();let a=0;t.contacts(e=>{e.acs&&!e.acs.isJoiner()&&a++});const s=t.getDefaultAccess();this.state={auth:s?s.auth:null,anon:s?s.anon:null,showPermissionEditorFor:void 0,blockedCount:a},this.handlePasswordUpdate=this.handlePasswordUpdate.bind(this),this.handleLaunchPermissionsEditor=this.handleLaunchPermissionsEditor.bind(this),this.handleHidePermissionsEditor=this.handleHidePermissionsEditor.bind(this),this.handlePermissionsChanged=this.handlePermissionsChanged.bind(this),this.handleDeleteAccount=this.handleDeleteAccount.bind(this),this.handleCheckboxClick=this.handleCheckboxClick.bind(this)}handlePasswordUpdate(e){this.setState({password:e}),this.props.onUpdatePassword(e)}handleLaunchPermissionsEditor(e){this.setState({showPermissionEditorFor:e,editedPermissions:this.state[e]})}handleHidePermissionsEditor(){this.setState({showPermissionEditorFor:void 0})}handlePermissionsChanged(e){let t={};t[this.state.showPermissionEditorFor]=e,this.props.onUpdateAccountDesc("me",void 0,void 0,t);let a={showPermissionEditorFor:void 0};a[this.state.showPermissionEditorFor]=e,this.setState(a)}handleCheckboxClick(e,t){this.props.onToggleIncognitoMode(t)}handleDeleteAccount(e){e.preventDefault();const{formatMessage:t}=this.props.intl;this.props.onShowAlert(t(d.delete_account),t(d.delete_account_warning),e=>this.props.onDeleteAccount(),null,!0,null)}render(){return l().createElement(l().Fragment,null,this.state.showPermissionEditorFor?l().createElement(r.A,{mode:this.state.editedPermissions,skip:"O",onSubmit:this.handlePermissionsChanged,onCancel:this.handleHidePermissionsEditor}):l().createElement("div",{className:"scrollable-panel"},l().createElement("div",{className:"panel-form-column"},l().createElement("label",{className:"small"},l().createElement(n.FormattedMessage,{id:"label_password",defaultMessage:[{type:0,value:"Password"}]})),l().createElement("div",null,l().createElement(n.FormattedMessage,{id:"password_unchanged_prompt",defaultMessage:[{type:0,value:"Unchanged"}]},e=>l().createElement(o.A,{placeholder:e,type:"password",onFinished:this.handlePasswordUpdate})))),l().createElement("div",{className:"hr"}),l().createElement("div",{className:"panel-form-row"},l().createElement("label",{htmlFor:"incognito-mode"},l().createElement(n.FormattedMessage,{id:"label_incognito_mode",defaultMessage:[{type:0,value:"Incognito mode:"}]})),l().createElement(i.A,{name:"incognito",id:"incognito-mode",checked:this.props.incognitoMode,onChange:this.handleCheckboxClick})),l().createElement("div",{className:"panel-form-row"},l().createElement("span",{className:"small"},l().createElement(n.FormattedMessage,{id:"incognito_mode_description",defaultMessage:[{type:0,value:"Hide your online status and typing indicators."}]}))),l().createElement("div",{className:"hr"}),l().createElement("div",{className:"panel-form-column"},l().createElement("a",{href:"#",className:"danger flat-button",onClick:e=>{e.preventDefault(),this.props.onLogout()}},l().createElement("i",{className:"material-icons"},"exit_to_app"),"  ",l().createElement(n.FormattedMessage,{id:"button_logout",defaultMessage:[{type:0,value:"Logout"}]})),l().createElement("a",{href:"#",className:"danger flat-button",onClick:e=>{this.handleDeleteAccount(e)}},l().createElement("i",{className:"material-icons"},"delete"),"  ",l().createElement(n.FormattedMessage,{id:"button_delete_account",defaultMessage:[{type:0,value:"Delete account"}]}))),l().createElement("div",{className:"hr"}),l().createElement("div",{className:"panel-form-column"},l().createElement("div",null,l().createElement("label",{className:"small"},l().createElement(n.FormattedMessage,{id:"label_default_access_mode",defaultMessage:[{type:0,value:"Default access mode:"}]}))),l().createElement("div",{className:"quoted"},l().createElement("div",null,"Auth: ",l().createElement("tt",{className:"clickable",onClick:this.handleLaunchPermissionsEditor.bind(this,"auth")},this.state.auth)),l().createElement("div",null,"Anon: ",l().createElement("tt",{className:"clickable",onClick:this.handleLaunchPermissionsEditor.bind(this,"anon")},this.state.anon)))),this.state.blockedCount>0?l().createElement(l().Fragment,null,l().createElement("div",{className:"hr"}),l().createElement("div",{className:"panel-form-row"},l().createElement("i",{className:"material-icons"},"block")," ",l().createElement("a",{href:"#",className:"gray",onClick:e=>{e.preventDefault(),this.props.onShowBlocked()}},l().createElement(n.FormattedMessage,{id:"blocked_contacts_link",defaultMessage:[{type:0,value:"Blocked contacts ("},{type:1,value:"count"},{type:0,value:")"}],values:{count:this.state.blockedCount}})))):null))}}t.default=(0,n.injectIntl)(c)},6235:function(e,t,a){var s=a(1594),l=a.n(s),n=a(8181),i=a(1166),o=a(6005),r=a(6110);const d=(0,n.defineMessages)({joiner:{id:"permission_join",defaultMessage:[{type:0,value:"Join ("},{type:1,value:"val"},{type:0,value:")"}]},reader:{id:"permission_read",defaultMessage:[{type:0,value:"Read ("},{type:1,value:"val"},{type:0,value:")"}]},writer:{id:"permission_write",defaultMessage:[{type:0,value:"Write ("},{type:1,value:"val"},{type:0,value:")"}]},preser:{id:"permission_pres",defaultMessage:[{type:0,value:"Get notified ("},{type:1,value:"val"},{type:0,value:")"}]},approver:{id:"permission_admin",defaultMessage:[{type:0,value:"Approve ("},{type:1,value:"val"},{type:0,value:")"}]},sharer:{id:"permission_share",defaultMessage:[{type:0,value:"Share ("},{type:1,value:"val"},{type:0,value:")"}]},deleter:{id:"permission_delete",defaultMessage:[{type:0,value:"Delete ("},{type:1,value:"val"},{type:0,value:")"}]},owner:{id:"permission_owner",defaultMessage:[{type:0,value:"Owner ("},{type:1,value:"val"},{type:0,value:")"}]}});class c extends l().Component{constructor(e){super(e),this.state={mode:(e.mode||"").replace("N","")},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}handleChange(e){let t=this.state.mode;-1==t.indexOf(e)?t+=e:t=t.replace(e,""),this.setState({mode:t})}handleSubmit(){const e=(this.state.mode||"N").split("").sort().join("");e!==(this.props.mode||"N").split("").sort().join("")?this.props.onSubmit(e):this.props.onCancel()}handleCancel(){this.props.onCancel()}render(){const{formatMessage:e}=this.props.intl,t="JRWPASDO",a={J:e(d.joiner,{val:"J"}),R:e(d.reader,{val:"R"}),W:e(d.writer,{val:"W"}),P:e(d.preser,{val:"P"}),A:e(d.approver,{val:"A"}),S:e(d.sharer,{val:"S"}),D:e(d.deleter,{val:"D"}),O:e(d.owner,{val:"O"})};let s=this.props.skip||"",c=this.state.mode,m=(this.props.compare||"").replace("N",""),h=[];for(let e=0;e<8;e++){let n=t.charAt(e);s.indexOf(n)>=0&&c.indexOf(n)<0||h.push(l().createElement("tr",{key:n},l().createElement("td",null,a[n]),l().createElement("td",{className:"checkbox"},s.indexOf(n)<0?l().createElement(i.A,{name:n,checked:c.indexOf(n)>=0,onChange:this.handleChange}):l().createElement(i.A,{name:n,checked:c.indexOf(n)>=0})),this.props.compare?l().createElement("td",{className:"checkbox"},l().createElement(i.A,{name:n,checked:m.indexOf(n)>=0})):null))}return l().createElement("div",{className:"panel-form-column"},this.props.userTitle?l().createElement("ul",{className:"contact-box small"},l().createElement(o.A,{tinode:this.props.tinode,item:this.props.item,title:this.props.userTitle,small:!0,avatar:(0,r.to)(this.props.userAvatar?this.props.userAvatar:null)})):null,l().createElement("label",{className:"small"},l().createElement(n.FormattedMessage,{id:"title_permissions",defaultMessage:[{type:0,value:"Permissions"}]})),l().createElement("table",{className:"permission-editor"},this.props.compare?l().createElement("thead",null,l().createElement("tr",null,l().createElement("th",null),l().createElement("th",null,this.props.modeTitle),l().createElement("th",null,this.props.compareTitle))):null,l().createElement("tbody",null,h)),l().createElement("br",null),l().createElement("div",{className:"dialog-buttons"},l().createElement("button",{className:"outline",onClick:this.handleCancel},l().createElement(n.FormattedMessage,{id:"button_cancel",defaultMessage:[{type:0,value:"Cancel"}]})),l().createElement("button",{className:"primary",onClick:this.handleSubmit},l().createElement(n.FormattedMessage,{id:"button_ok",defaultMessage:[{type:0,value:"OK"}]}))))}}t.A=(0,n.injectIntl)(c)}}]);
//# sourceMappingURL=352.prod.js.map