{"version":3,"file":"827.prod.js","mappings":"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","sources":["webpack://tinode-webapp/./src/views/wallpapers.jsx"],"sourcesContent":["// Edit account parameters.\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport HashNavigation from '../lib/navigation.js';\nimport { WALLPAPER_DEFAULTS } from '../config.js';\nimport { wallpaperNameFromUrl, wallpaperTypeFromUrl } from '../lib/utils.js';\nimport imageIndex from '../../img/bkg/index.json';\n\nexport default class WallpapersView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    const type = wallpaperTypeFromUrl(this.props.wallpaper);\n    const name = wallpaperNameFromUrl(this.props.wallpaper);\n    this.state = {\n      tab: type || WALLPAPER_DEFAULTS.type, // currently selected tab: 'patt' | 'img'\n      selectedType: type || WALLPAPER_DEFAULTS.type, // type of the selected wallpaper.\n      wallpaper: name || imageIndex[WALLPAPER_DEFAULTS.type][WALLPAPER_DEFAULTS.index].name,\n      blur: this.props.wallpaperBlur | 0,\n    };\n\n    this.blurValues = [0, 1, 2, 4, 8, 16];\n\n    this.handleTabClick = this.handleTabClick.bind(this);\n    this.handleWallpaperSelected = this.handleWallpaperSelected.bind(this);\n    this.handleBlurChanged = this.handleBlurChanged.bind(this);\n    this.hasChanged = this.hasChanged.bind(this);\n  }\n\n  handleTabClick(e) {\n    e.preventDefault();\n    HashNavigation.navigateTo(HashNavigation.addUrlParam(window.location.hash, 'tab', e.currentTarget.dataset.id));\n    this.setState({tab: e.currentTarget.dataset.id});\n  }\n\n  handleWallpaperSelected(e) {\n    let index, type, blur\n    if (!e) {\n      if (!this.hasChanged()) {\n        return;\n      }\n\n      // Restore default.\n      type = WALLPAPER_DEFAULTS.type;\n      index = WALLPAPER_DEFAULTS.index;\n      blur = 0;\n    } else {\n      e.preventDefault();\n      type = this.state.tab;\n      index = e.currentTarget.dataset.id;\n      blur = type == 'patt' ? 0 : this.state.blur;\n    }\n    const fname = imageIndex[type][index].name;\n    const size = type == 'patt' ? imageIndex[type][index].size : 0;\n    this.setState({tab: type, wallpaper: fname, selectedType: type, blur: blur});\n    this.props.onWallpaperSelected(`../${WALLPAPER_DEFAULTS.path}${fname}`, size, this.blurValues[blur]);\n  }\n\n  handleBlurChanged(e) {\n    e.preventDefault();\n    const blur = e.currentTarget.value;\n    this.setState({blur: blur});\n    if (this.state.selectedType == 'img') {\n      // Apply blur to patterns only. Path relative to CSS file.\n      this.props.onWallpaperSelected(`../${WALLPAPER_DEFAULTS.path}${this.state.wallpaper}`, 0, this.blurValues[blur]);\n    }\n  }\n\n  hasChanged() {\n    return this.state.selectedType != WALLPAPER_DEFAULTS.type ||\n      this.state.wallpaper != imageIndex[WALLPAPER_DEFAULTS.type][WALLPAPER_DEFAULTS.index].name ||\n      this.state.blur != 0;\n  }\n\n  render() {\n    return (\n      <div className=\"flex-column\">\n        <div className={`panel-form-row${this.hasChanged() ? ' clean-clickable' : ''}`}>\n          <a className={`flat-button${this.hasChanged() ? '' : ' disabled'}`}\n            onClick={() => this.handleWallpaperSelected(null)}>\n            <i className=\"m-icon\">undo</i>&nbsp;\n            <FormattedMessage id=\"button_restore\" defaultMessage=\"Restore default\" description=\"Reset setting to default\"/>\n          </a>\n        </div>\n        <ul className=\"tabbar\">\n          <li className={this.state.tab === 'patt' ? 'active' : null}>\n            <a href=\"#\" data-id=\"patt\" onClick={this.handleTabClick}>\n              <FormattedMessage id=\"tabtitle_pattern\" defaultMessage=\"pattern\"\n                description=\"Tab title Pattern\" />\n            </a>\n          </li>\n          <li className={this.state.tab === 'img' ? 'active' : null}>\n            <a href=\"#\" data-id=\"img\" onClick={this.handleTabClick}>\n              <FormattedMessage id=\"tabtitle_image\" defaultMessage=\"image\"\n                description=\"Tab title Image\" />\n            </a>\n          </li>\n        </ul>\n        <div id=\"settings-form\" className=\"scrollable-panel\">\n        {this.state.tab === 'patt' ?\n          <div className=\"image-grid\">\n            {imageIndex.patt.map((img, idx) => {\n              const selected = this.state.wallpaper === img.name ? ' selected' : '';\n              const dark = this.props.colorSchema == 'dark' ? 'inverted' : null;\n              return <div key={idx} data-id={idx} className={`image-grid-cell${selected}`}\n                onClick={this.handleWallpaperSelected}>\n                <img src={WALLPAPER_DEFAULTS.path + img.name} alt={img.name} className={dark}\n                  style={{ width: `${img.size}px`, height: `${img.size}px` }}/>\n              </div>\n            })}\n          </div> :\n          <>\n            <div className=\"panel-form-column\">\n              <div className=\"panel-form-row\">\n                <label className=\"small\">\n                  <FormattedMessage id=\"label_blur_wallpaper\" defaultMessage=\"Blur:\"\n                    description=\"Label adjusting blur amount\" />\n                </label>\n              </div>\n              <div className=\"panel-form-row\">\n                <input type=\"range\" id=\"blur\" name=\"blur\" min=\"0\" max=\"5\" step=\"1\"\n                  value={this.state.blur} onChange={this.handleBlurChanged} />\n              </div>\n            </div>\n            <div className=\"image-grid\">\n              {imageIndex.img.map((img, idx) => {\n                const selected = this.state.wallpaper === img.name ? ' selected' : '';\n                return <div key={idx} data-id={idx} className={`image-grid-cell${selected}`}\n                  onClick={this.handleWallpaperSelected}>\n                  <img src={WALLPAPER_DEFAULTS.path + img.pr} alt={img.name} style={{ width: '100%', height: '100%' }}/>\n                </div>\n              })}\n            </div>\n          </>\n        }</div>\n      </div>\n    );\n  }\n}\n"],"names":["WallpapersView","React","constructor","props","super","type","wallpaperTypeFromUrl","this","wallpaper","name","wallpaperNameFromUrl","state","tab","WALLPAPER_DEFAULTS","selectedType","imageIndex","index","blur","wallpaperBlur","blurValues","handleTabClick","bind","handleWallpaperSelected","handleBlurChanged","hasChanged","e","preventDefault","HashNavigation","navigateTo","addUrlParam","window","location","hash","currentTarget","dataset","id","setState","fname","size","onWallpaperSelected","path","value","render","className","onClick","FormattedMessage","defaultMessage","href","map","img","idx","selected","dark","colorSchema","key","src","alt","style","width","height","min","max","step","onChange","pr"],"ignoreList":[],"sourceRoot":""}