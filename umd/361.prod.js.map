{"version":3,"file":"361.prod.js","mappings":"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","sources":["webpack://tinode-webapp/./src/widgets/group-manager.jsx","webpack://tinode-webapp/./src/widgets/show-qrcode.jsx","webpack://tinode-webapp/./src/widgets/topic-security.jsx","webpack://tinode-webapp/./src/widgets/topic-reactions.jsx","webpack://tinode-webapp/./src/views/info-view.jsx","webpack://tinode-webapp/./src/widgets/permissions-editor.jsx"],"sourcesContent":["// GroupMembers: control for managing a list of group members.\nimport React from 'react';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport ChipInput from './chip-input.jsx';\nimport ContactList from './contact-list.jsx';\n\nconst messages = defineMessages({\n  no_contacts: {\n    id: 'no_contacts',\n    defaultMessage: 'You have no contacts :-(',\n    description: 'Shown in ContactsView when the user has no contacts'\n  },\n  contacts_not_found_short: {\n    id: 'contacts_not_found_short',\n    defaultMessage: \"No contacts match ''{query}''\",\n    description: 'Shown in ContactsView when search returned no results'\n  }\n});\n\nclass GroupManager extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // Array of topic members\n      members: props.members,\n      index: GroupManager.indexMembers(props.members),\n      staticMembers: GroupManager.staticMembers(props.members, props.keepInitialMembers, props.requiredMember),\n      contactFilter: '',\n      noContactsMessage: props.intl.formatMessage(messages.no_contacts),\n      selectedContacts: GroupManager.selectedContacts(props.members)\n    };\n\n    this.handleContactSelected = this.handleContactSelected.bind(this);\n    this.handleMemberRemoved = this.handleMemberRemoved.bind(this);\n    this.handleContactFilter = this.handleContactFilter.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  static indexMembers(members) {\n    let index = {};\n    members.forEach(m => {\n      index[m.user] = {delta: 0, present: true}; // Delta: 0 unchanged, +1 added, -1 removed\n    });\n    return index;\n  }\n\n  static staticMembers(members, keepInitial, requiredMember) {\n    let stat = [];\n    members.forEach(m => {\n      if (keepInitial || m.user == requiredMember) {\n        stat.push(m.user);\n      }\n    });\n    return stat;\n  }\n\n  static selectedContacts(members) {\n    let sel = [];\n    members.forEach(m => {\n      sel.push(m.user);\n    });\n    return sel;\n  }\n\n  handleContactSelected(userId, index) {\n    let status = this.state.index[userId];\n    if (status) {\n      if (status.present) {\n        // Prevent duplicate members\n        return;\n      }\n      status.delta += 1;\n      status.present = true;\n    } else {\n      status = {delta: 1, present: true};\n    }\n\n    let m = this.state.members.slice();\n    m.push(this.props.contacts[index]);\n\n    const sel = GroupManager.selectedContacts(m);\n\n    const i = this.state.index;\n    i[userId] = status;\n\n    this.setState({members: m, index: i, selectedContacts: sel});\n  }\n\n  handleMemberRemoved(userId, index) {\n    const status = this.state.index[userId];\n    if (!status || !status.present) {\n      return;\n    }\n    status.present = false;\n    status.delta -= 1;\n\n    let m = this.state.members.slice();\n    m.splice(index, 1);\n\n    const sel = GroupManager.selectedContacts(m);\n\n    const i = this.state.index;\n    i[userId] = status;\n\n    this.setState({members: m, index: i, selectedContacts: sel});\n  }\n\n  handleContactFilter(val) {\n    const {formatMessage} = this.props.intl;\n    const msg = !val ?\n      formatMessage(messages.no_contacts) :\n      formatMessage(messages.contacts_not_found_short, {query: val});\n\n    this.setState({contactFilter: val, noContactsMessage: msg});\n  }\n\n  static doContactFiltering(filter, values) {\n    if (filter) {\n      for (let i=0; i<values.length; i++) {\n        if (values[i].indexOf(filter) >= 0) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit() {\n    const members = [];\n    const added = [];\n    const removed = [];\n\n    const keys = Object.keys(this.state.index);\n    keys.forEach(k => {\n      if (this.state.index[k].present) {\n        members.push(k);\n      }\n\n      if (this.state.index[k].delta > 0) {\n        added.push(k);\n      } else if (this.state.index[k].delta < 0) {\n        removed.push(k);\n      }\n    });\n    this.props.onSubmit(members, added, removed);\n  }\n\n  handleCancel() {\n    this.props.onCancel();\n  }\n\n  render() {\n    return (\n      <div id=\"group-manager\">\n        <div className=\"panel-form-row\">\n          <label className=\"small\">\n            <FormattedMessage id=\"title_group_members\" defaultMessage=\"Group Members\" description=\"Section title\" />\n          </label>\n        </div>\n        <div className=\"panel-form-row\">\n          <ChipInput\n            tinode={this.props.tinode}\n            chips={this.state.members}\n            staticMembers={this.state.staticMembers}\n            prompt=\"add members\"\n            filterFunc={this.handleContactFilter}\n            onChipRemoved={this.handleMemberRemoved} />\n        </div>\n        <div className=\"panel-form-row\">\n          <label className=\"small\">\n            <FormattedMessage id=\"title_all_contacts\" defaultMessage=\"All Contacts\"\n              description=\"Section title [All Contacts]\" />\n          </label>\n        </div>\n        <ContactList\n          tinode={this.props.tinode}\n          contacts={this.props.contacts}\n          myUserId={this.props.myUserId}\n          topicSelected={this.state.selectedContacts}\n          filter={this.state.contactFilter}\n          filterFunc={GroupManager.doContactFiltering}\n          emptyListMessage={this.state.noContactsMessage}\n          showOnline={false}\n          showUnread={false}\n          onTopicSelected={this.handleContactSelected} />\n        <div id=\"group-manager-buttons\" className=\"panel-form-row\">\n          <button className=\"secondary\" onClick={this.handleCancel}>\n            <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\n          </button>\n          <button className=\"primary\" onClick={this.handleSubmit}>\n            <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default injectIntl(GroupManager);\n","import QRCode from 'qrcodejs';\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { QRCODE_SIZE } from '../config';\n\nexport default class ShowQRCode extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.qrCodeRef = React.createRef();\n  }\n\n  componentDidMount() {\n    new QRCode(this.qrCodeRef.current, {\n      text: this.props.uri,\n      width: QRCODE_SIZE,\n      height: QRCODE_SIZE,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"panel-form-column\">\n        <br />\n        <div className=\"qr-code\" ref={this.qrCodeRef} />\n        <div><tt>{this.props.uri}</tt></div>\n        <div className=\"dialog-buttons\">\n          <button className=\"outline\" onClick={this.props.onCancel}>\n            <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n};\n","// Edit account parameters.\nimport React from 'react';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nconst messages = defineMessages({\n  clear_messages: {\n    id: 'action_clear_messages',\n    defaultMessage: 'Clear Messages',\n    description: 'Flat button [Clear Messages] (soft-delete messages)'\n  },\n  clear_messages_warning: {\n    id: 'clear_messages_warning',\n    defaultMessage: 'Are you sure you want to clear all messages? It cannot be undone.',\n    description: 'Alert dialog warning when deleting all messages.'\n  },\n  delete_messages: {\n    id: 'action_delete_messages',\n    defaultMessage: 'Clear Messages for All',\n    description: 'Flat button [Clear for All] (hard-delete all messages)'\n  },\n  delete_messages_warning: {\n    id: 'delete_messages_warning',\n    defaultMessage: 'Are you sure you want to delete all messages for everyone? It cannot be undone.',\n    description: 'Alert dialog warning when hard-deleting all messages.'\n  },\n  topic_delete: {\n    id: 'topic_delete',\n    defaultMessage: 'Delete Conversation',\n    description: 'Alert title when deleting the topic.'\n  },\n  topic_delete_warning: {\n    id: 'topic_delete_warning',\n    defaultMessage: 'Are you sure you want to delete this conversation? It cannot be undone.',\n    description: 'Alert warning when deleting entire topic'\n  },\n  leave_chat: {\n    id: 'action_leave_chat',\n    defaultMessage: 'Leave Conversation',\n    description: 'Flat button [Leave Conversation]'\n  },\n  leave_chat_warning: {\n    id: 'leave_chat_warning',\n    defaultMessage: 'Are you sure you want to leave this conversation?',\n    description: 'Alert dialog warning when unsubscribing from a chat.'\n  },\n  block_contact: {\n    id: 'action_block_contact',\n    defaultMessage: \"Block Contact\",\n    description: \"Flat button [Block Contact]\"\n  },\n  block_contact_warning: {\n    id: 'block_contact_warning',\n    defaultMessage: 'Are you sure you want to block this contact?',\n    description: 'Alert dialog warning when blocking a contact.'\n  },\n  report_chat: {\n    id: 'action_report_chat',\n    defaultMessage: 'Report Conversation',\n    description: 'Flat button [Report Group]'\n  },\n  report_chat_warning: {\n    id: 'report_chat_warning',\n    defaultMessage: 'Are you sure you want to block and report this conversation?',\n    description: 'Alert dialog warning when reporting a conversation for abuse'\n  },\n  other_user: {\n    id: 'label_other_user',\n    defaultMessage: 'Other',\n    description: 'Label for the other user when the user is unnamed'\n  },\n});\n\nclass TopicSecurity extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.handleDeleteTopic = this.handleDeleteTopic.bind(this);\n    this.handleDeleteMessages = this.handleDeleteMessages.bind(this);\n    this.handleLeave = this.handleLeave.bind(this);\n    this.handleBlock = this.handleBlock.bind(this);\n    this.handleReport = this.handleReport.bind(this);\n  }\n\n  handleDeleteTopic(e) {\n    e.preventDefault();\n    const {formatMessage} = this.props.intl;\n    this.props.onShowAlert(\n      formatMessage(messages.topic_delete), // title\n      formatMessage(messages.topic_delete_warning), // content\n      _ => this.props.onDeleteTopic(this.props.topic), // onConfirm\n      null, // \"OK\"\n      true, // Show Reject button\n      null  // \"Cancel\"\n    );\n  }\n\n  handleDeleteMessages(e) {\n    e.preventDefault();\n    const {formatMessage} = this.props.intl;\n    this.props.onShowAlert(\n      formatMessage(this.props.deleter ? messages.delete_messages : messages.clear_messages), // title\n      formatMessage(this.props.deleter ? messages.delete_messages_warning : messages.clear_messages_warning), // content\n      _ => this.props.onDeleteMessages(this.props.topic), // onConfirm\n      null, // \"OK\"\n      true, // Show Reject button\n      null  // \"Cancel\"\n    );\n  }\n\n  handleLeave(e) {\n    e.preventDefault();\n    const {formatMessage} = this.props.intl;\n    this.props.onShowAlert(\n      formatMessage(messages.leave_chat), // title\n      formatMessage(messages.leave_chat_warning), // content\n      _ => this.props.onLeaveTopic(this.props.topic), // onConfirm\n      null, // \"OK\"\n      true, // Show Reject button\n      null  // \"Cancel\"\n    );\n  }\n\n  handleBlock(e) {\n    e.preventDefault();\n    const {formatMessage} = this.props.intl;\n    this.props.onShowAlert(\n      formatMessage(messages.block_contact), // title\n      formatMessage(messages.block_contact_warning), // content\n      _ => this.props.onBlockTopic(this.props.topic), // onConfirm\n      null, // \"OK\"\n      true, // Show Reject button\n      null  // \"Cancel\"\n    );\n  }\n\n  handleReport(e) {\n    e.preventDefault();\n    const {formatMessage} = this.props.intl;\n    this.props.onShowAlert(\n      formatMessage(messages.report_chat), // title\n      formatMessage(messages.report_chat_warning), // content\n      (_ => { this.props.onReportTopic(this.props.topic); }), // onConfirm\n      null, // \"OK\"\n      true, // Show Reject button\n      null  // \"Cancel\"\n    );\n  }\n\n  render() {\n    const {formatMessage} = this.props.intl;\n    return (\n      <div className=\"scrollable-panel\">\n        <div className=\"panel-form-column\">\n          {!this.props.channel ?\n            <a href=\"#\" className=\"flat-button\" onClick={this.handleDeleteMessages}>\n              <i className=\"m-icon\">delete_outline</i> &nbsp;{\n                formatMessage(this.props.deleter ? messages.delete_messages : messages.clear_messages)\n              }\n            </a>\n            :\n            null\n          }\n          {this.props.owner ?\n            <a href=\"#\" className=\"danger flat-button\" onClick={this.handleDeleteTopic}>\n              <i className=\"m-icon\">delete</i> &nbsp;{formatMessage(messages.topic_delete)}\n            </a>\n            :\n            <a href=\"#\" className=\"danger flat-button\" onClick={this.handleLeave}>\n              <i className=\"m-icon\">exit_to_app</i> &nbsp;{formatMessage(messages.leave_chat)}\n            </a>\n          }\n          {!this.props.groupTopic ?\n            <a href=\"#\" className=\"danger flat-button\" onClick={this.handleBlock}>\n              <i className=\"m-icon\">block</i> &nbsp;{formatMessage(messages.block_contact)}\n            </a>\n            :\n            null\n          }\n          {!this.props.owner ?\n            <a href=\"#\" className=\"danger flat-button\" onClick={this.handleReport}>\n              <i className=\"m-icon\">report</i> &nbsp;{formatMessage(messages.report_chat)}\n            </a>\n            :\n            null\n          }\n        </div>\n        <div className=\"hr\" />\n        <div className=\"panel-form-column\">\n          {this.props.groupTopic ?\n            <>\n              <div className=\"group\">\n                <label>\n                  <FormattedMessage id=\"label_your_permissions\" defaultMessage=\"Your permissions:\"\n                    description=\"Label for current user permissions\" />\n                </label> <tt className=\"clickable\"\n                  onClick={(e) => {e.preventDefault(); this.props.onLaunchPermissionsEditor('want')}}>\n                  {this.props.access}\n                </tt>\n              </div>\n              {!this.props.channel ?\n                <div className=\"group\">\n                  <div>\n                    <label className=\"small\">\n                      <FormattedMessage id=\"label_default_access_mode\" defaultMessage=\"Default access mode:\"\n                      description=\"Label for default access mode\" />\n                    </label>\n                  </div>\n                  <div className=\"quoted\">\n                    <div>Auth: <tt className={this.props.owner ? 'clickable' : null}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        if (this.props.owner) {\n                          this.props.onLaunchPermissionsEditor('auth');\n                        }\n                      }}>{this.props.auth}</tt>\n                    </div>\n                    <div>Anon: <tt className={this.props.owner ? 'clickable' : null}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        if (this.props.owner) {\n                          this.props.onLaunchPermissionsEditor('anon');\n                        }\n                      }}>{this.props.anon}</tt>\n                    </div>\n                  </div>\n                </div>\n              :\n                null\n              }\n            </>\n            :\n            <div className=\"group\">\n              <div>\n                <label className=\"small\">\n                  <FormattedMessage id=\"label_permissions\" defaultMessage=\"Permissions:\"\n                    description=\"Section title\" />\n                </label>\n              </div>\n              <div className=\"quoted\">\n                <div>\n                  <FormattedMessage id=\"label_you\" defaultMessage=\"You:\"\n                    description=\"Label for the current user\" /> <tt className=\"clickable\"\n                    onClick={(e) => {e.preventDefault(); this.props.onLaunchPermissionsEditor('want')}}>\n                    {this.props.access}\n                  </tt>\n                </div>\n                <div>{this.props.fullName ? this.props.fullName : formatMessage(messages.other_user)}:\n                  &nbsp;<tt className=\"clickable\"\n                    onClick={(e) => {e.preventDefault(); this.props.onLaunchPermissionsEditor('given')}}>\n                    {this.props.modeGiven2}\n                  </tt>\n                </div>\n              </div>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default injectIntl(TopicSecurity);\n","// Topic reaction settings editor.\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nexport default class TopicReactions extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    // Get current topic reactions or empty array\n    const currentReactions = (props.react && props.react.vals) || [];\n    // Get current max per message setting\n    const currentMax = (props.react && props.react.max) || null;\n\n    this.state = {\n      selectedReactions: [...currentReactions],\n      maxPerMessage: currentMax\n    };\n\n    this.handleReactionToggle = this.handleReactionToggle.bind(this);\n    this.handleMaxChange = this.handleMaxChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n  }\n\n  handleMaxChange(e) {\n    const value = parseInt(e.target.value);\n    const sliderMax = this.state.selectedReactions.length || 1;\n    // If slider is at max position, treat as \"use server default\" (null)\n    this.setState({ maxPerMessage: value >= sliderMax ? null : value });\n  }\n\n  handleReactionToggle(emoji) {\n    const selected = [...this.state.selectedReactions];\n    const idx = selected.indexOf(emoji);\n\n    if (idx >= 0) {\n      // Remove if already selected\n      selected.splice(idx, 1);\n    } else {\n      // Add if not at max limit\n      if (selected.length < this.props.maxReactions) {\n        selected.push(emoji);\n      } else {\n        // Could show a toast here\n        return;\n      }\n    }\n\n    this.setState({ selectedReactions: selected });\n  }\n\n  handleSave() {\n    let reactConfig = null;\n    if (this.state.selectedReactions.length > 0 || this.state.maxPerMessage !== null) {\n      reactConfig = {};\n      if (this.state.selectedReactions.length > 0) {\n        reactConfig.vals = this.state.selectedReactions;\n      }\n      if (this.state.maxPerMessage !== null) {\n        reactConfig.max = this.state.maxPerMessage;\n      }\n    }\n    this.props.onUpdateReactions(reactConfig);\n  }\n\n  render() {\n    const { availableReactions, maxReactions } = this.props;\n    const { selectedReactions, maxPerMessage } = this.state;\n    const originalVals = (this.props.react && this.props.react.vals) || [];\n    const originalMax = (this.props.react && this.props.react.max) || null;\n    const hasChanges = JSON.stringify(selectedReactions) !== JSON.stringify(originalVals) ||\n      maxPerMessage !== originalMax;\n\n    // Max slider value is the count of selected reactions (can't exceed what's configured)\n    const sliderMax = selectedReactions.length || 1;\n    const sliderValue = maxPerMessage === null ? sliderMax : Math.min(maxPerMessage, sliderMax);\n\n    return (\n      <div id=\"topic-reactions\" className=\"scrollable-panel\">\n        <div className=\"panel-form-column\">\n          <div className=\"group\">\n            <label className=\"small\" htmlFor=\"max-per-message\">\n              <FormattedMessage\n                id=\"label_max_reactions_per_message\"\n                defaultMessage=\"Maximum reaction types per message\"\n                description=\"Label for max reactions per message setting\" />\n              {maxPerMessage !== null && <span>: {maxPerMessage}</span>}\n            </label>\n            <p className=\"small\">\n              <FormattedMessage\n                id=\"max_reactions_per_message_description\"\n                defaultMessage=\"Limit how many different reaction types can be added to a single message.\"\n                description=\"Description of max reactions per message\" />\n            </p>\n            <input\n              type=\"range\"\n              id=\"max-per-message\"\n              min=\"1\"\n              max={sliderMax}\n              value={sliderValue}\n              onChange={this.handleMaxChange}\n              disabled={selectedReactions.length === 0}\n            />\n          </div>\n\n          <div className=\"group\">\n            <label className=\"small\">\n              <FormattedMessage\n                id=\"label_reaction_settings\"\n                defaultMessage=\"Selected reactions\"\n                description=\"Label for topic reaction settings\" />\n            </label>\n          </div>\n\n          <div className=\"group\">\n            <div className=\"selected-reactions-palette\">\n              {selectedReactions.length === 0 ?\n                <span className=\"selected-reactions-empty\">\n                  <FormattedMessage\n                    id=\"no_reactions_selected\"\n                    defaultMessage=\"No reactions selected\"\n                    description=\"Shown when no reactions are selected\" />\n                </span>\n                :\n                selectedReactions.map(emoji => (\n                  <div\n                    key={emoji}\n                    onClick={() => this.handleReactionToggle(emoji)}\n                    className=\"selected-reaction\"\n                    title={`Click to remove ${emoji}`}>\n                    {emoji}\n                  </div>\n                ))\n              }\n            </div>\n          </div>\n\n          <div className=\"group\">\n            <label className=\"small\">\n              <FormattedMessage\n                id=\"label_available_reactions\"\n                defaultMessage=\"Available reactions\"\n                description=\"Label for available reactions picker\" />\n            </label>\n            <div className=\"available-reactions-grid\">\n              {availableReactions && availableReactions.map(emoji => {\n                const isSelected = selectedReactions.includes(emoji);\n                const isDisabled = !isSelected && selectedReactions.length >= maxReactions;\n\n                return (\n                  <div\n                    key={emoji}\n                    onClick={() => !isDisabled && this.handleReactionToggle(emoji)}\n                    className={`available-reaction${isSelected ? ' selected' : ''}${isDisabled ? ' disabled' : ''}`}>\n                    {emoji}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          <div className=\"dialog-buttons\">\n            <button className=\"secondary\" onClick={this.props.onCancel}>\n              <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\"\n                description=\"Button [Cancel]\" />\n            </button>\n            <button className=\"primary\" onClick={this.handleSave} disabled={!hasChanges}>\n              <FormattedMessage id=\"button_save\" defaultMessage=\"Save\"\n                description=\"Button [Save]\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","// InfoView: panel with topic/user info.\nimport React from 'react';\nimport { FormattedMessage, FormattedNumber, defineMessages, injectIntl } from 'react-intl';\n\nimport { AccessMode, Tinode, TheCard } from 'tinode-sdk';\n\nimport AvatarUpload from '../widgets/avatar-upload.jsx';\nimport BadgeList from '../widgets/badge-list.jsx';\nimport CheckBox from '../widgets/checkbox.jsx';\nimport ContactList from '../widgets/contact-list.jsx';\nimport ErrorPanel from '../widgets/error-panel.jsx';\nimport GroupManager from '../widgets/group-manager.jsx';\nimport MenuCancel from '../widgets/menu-cancel.jsx';\nimport PermissionsEditor from '../widgets/permissions-editor.jsx';\nimport ShowQRCode from '../widgets/show-qrcode.jsx';\nimport TopicCommonView from './topic-common-view.jsx';\nimport TopicSecurity from '../widgets/topic-security.jsx';\nimport TopicReactions from '../widgets/topic-reactions.jsx';\n\nimport { MAX_TITLE_LENGTH, MAX_TOPIC_DESCRIPTION_LENGTH,\n  NO_ACCESS_MODE, TOAST_DURATION } from '../config.js';\n\nimport { makeImageUrl } from '../lib/blob-helpers.js';\nimport { truncateString } from '../lib/strformat.js';\n\nconst messages = defineMessages({\n  info: {\n    id: 'panel_title_info',\n    description: 'Title for InfoView',\n    defaultMessage: 'Info'\n  },\n  general: {\n    id: 'panel_title_general',\n    description: 'Title for TopicCommon.',\n    defaultMessage: 'General'\n  },\n  security: {\n    id: 'panel_title_security',\n    description: 'Title for TopicSecirity and AccSecurity.',\n    defaultMessage: 'Security'\n  },\n  members: {\n    id: 'panel_title_members',\n    description: 'Title for managing group members view.',\n    defaultMessage: 'Members'\n  },\n  crop: {\n    id: 'panel_title_crop',\n    description: 'Title for AvatarCropView.',\n    defaultMessage: 'Drag to Adjust'\n  },\n  perm_want: {\n    id: 'requested_permissions',\n    defaultMessage: 'Requested',\n    description: 'Title for permissions'\n  },\n  perm_given: {\n    id: 'granted_permissions',\n    defaultMessage: 'Granted',\n    description: 'Title for permissions'\n  },\n  perm_auth: {\n    id: 'permissions_authenticated',\n    defaultMessage: 'Authenticated',\n    description: 'Title for editing default authenticated permissions'\n  },\n  perm_anon: {\n    id: 'permissions_anonymous',\n    defaultMessage: 'Anonymous',\n    description: 'Title for editing default anonymous permissions'\n  },\n  perm_user: {\n    id: 'permissions_user',\n    defaultMessage: 'User\\'s Permissions',\n    description: 'Title for editing user\\'s permissions'\n  },\n  edit_permissions: {\n    id: 'menu_item_edit_permissions',\n    defaultMessage: 'Edit permissions',\n    description: 'Menu item [Edit permissions]'\n  },\n  qrcode: {\n    id: 'scan_qr_code',\n    defaultMessage: 'Scan QR Code',\n    description: 'Title for scanning QR code'\n  },\n  reactions: {\n    id: 'panel_title_reactions',\n    defaultMessage: 'Reactions',\n    description: 'Title for reaction settings panel'\n  },\n  text_copied: {\n    id: 'text_copied',\n    defaultMessage: 'Copied to clipboard',\n    description: 'Notification that text has been copied to clipboard'\n  },\n  self_topic_name: {\n    id: 'self_topic_name',\n    defaultMessage: 'Saved messages',\n    description: 'Name of self topic for UI',\n  },\n  self_topic_comment: {\n    id: 'self_topic_comment',\n    defaultMessage: 'Notes, messages, links, files saved for posterity',\n    description: 'Comment for self topic for UI',\n  },\n});\n\nclass InfoView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      topic: null,\n      owner: false,\n      admin: false,\n      sharer: false,\n      deleter: false,\n      muted: false,\n      address: null,\n      groupTopic: undefined,\n      isSelf: false,\n      channel: undefined,\n      fullName: undefined,\n      description: undefined,\n      avatar: null,\n      private: null,\n      selectedContact: null,\n      access: null,\n      modeGiven: null,\n      modeWant: null,\n      modeGiven2: null, // P2P topic, the other user mode given\n      modeWant2: null,  // P2P topic, the other user mode want\n      auth: null,\n      anon: null,\n      contactList: [],\n      trustedBadges: [],\n      previousMetaDesc: undefined,\n      previousSubsUpdated: undefined,\n    };\n\n    this.propsUpdated = this.propsUpdated.bind(this);\n    this.resetSubs = this.resetSubs.bind(this);\n    this.resetDesc = this.resetDesc.bind(this);\n    this.resetTags = this.resetTags.bind(this);\n    this.onMetaDesc = this.onMetaDesc.bind(this);\n    this.onSubsUpdated = this.onSubsUpdated.bind(this);\n    this.handleImageChanged = this.handleImageChanged.bind(this);\n    this.handleMuted = this.handleMuted.bind(this);\n    this.handleUnarchive = this.handleUnarchive.bind(this);\n    this.handlePermissionsChanged = this.handlePermissionsChanged.bind(this);\n    this.handleLaunchPermissionsEditor = this.handleLaunchPermissionsEditor.bind(this);\n    this.handleShowQRCode = this.handleShowQRCode.bind(this);\n    this.handleCopyToClipboard = this.handleCopyToClipboard.bind(this);\n    this.handleShare = this.handleShare.bind(this);\n    this.handleShowAddMembers = this.handleShowAddMembers.bind(this);\n    this.handleMemberUpdateRequest = this.handleMemberUpdateRequest.bind(this);\n    this.handleMemberSelected = this.handleMemberSelected.bind(this);\n    this.handleUpdateReactions = this.handleUpdateReactions.bind(this);\n    this.handleContextMenu = this.handleContextMenu.bind(this);\n    this.handleBackNavigate = this.handleBackNavigate.bind(this);\n  }\n\n  propsUpdated(props) {\n    const topic = this.props.tinode.getTopic(props.topic);\n    if (!topic) {\n      return;\n    }\n\n    if (this.onMetaDesc != topic.onMetaDesc) {\n      this.previousMetaDesc = topic.onMetaDesc;\n      topic.onMetaDesc = this.onMetaDesc;\n\n      this.previousSubsUpdated = topic.onSubsUpdated;\n      topic.onSubsUpdated = this.onSubsUpdated;\n    }\n\n    if (this.state.topic != props.topic) {\n      this.setState({topic: props.topic});\n      this.resetDesc(topic, props);\n      this.resetSubs(topic, props);\n      this.resetTags(topic);\n    }\n  }\n\n  // Must provide this for lazy loaded components.\n  componentDidMount() {\n    this.propsUpdated(this.props);\n  }\n\n  componentDidUpdate(props) {\n    this.propsUpdated(props);\n  }\n\n  componentWillUnmount() {\n    const topic = this.props.tinode.getTopic(this.props.topic);\n    if (!topic) {\n      return;\n    }\n    this.setState({topic: null});\n    topic.onMetaDesc = this.previousMetaDesc;\n    topic.onSubsUpdated = this.previousSubsUpdated;\n  }\n\n  resetSubs(topic, props) {\n    const newState = {contactList: []};\n    if (topic.getType() == 'p2p') {\n      // Fetch the other party in the p2p conversation.\n      // Topic may not be ready yet, so check if user is found.\n      const user2 = topic.subscriber(props.topic);\n      if (user2) {\n        newState.modeGiven2 = user2.acs.getGiven();\n        newState.modeWant2 = user2.acs.getWant();\n      } else {\n        newState.modeGiven2 = NO_ACCESS_MODE;\n        newState.modeWant2 = NO_ACCESS_MODE;\n      }\n    } else {\n      topic.subscribers((sub) => {\n        newState.contactList.push(sub);\n      }, this);\n    }\n\n    this.setState(newState);\n  }\n\n  resetDesc(topic, props) {\n    const defacs = topic.getDefaultAccess() || {};\n    const acs = topic.getAccessMode();\n\n    const badges = [];\n    if (topic.trusted) {\n      for (const [key, val] of Object.entries(topic.trusted)) {\n        if (val) {\n          badges.push(key);\n        }\n      }\n    }\n\n    const isSelf = topic.isSelfType();\n\n    this.setState({\n      owner: acs && acs.isOwner(),\n      admin: acs && acs.isAdmin(),\n      sharer: acs && acs.isSharer(),\n      deleter: acs && acs.isDeleter(),\n      muted: acs && acs.isMuted(),\n\n      fullName: isSelf ?\n        props.intl.formatMessage(messages.self_topic_name) :\n        truncateString(topic.public && topic.public.fn, MAX_TITLE_LENGTH),\n      description: isSelf ?\n        props.intl.formatMessage(messages.self_topic_comment) :\n        truncateString(topic.public && topic.public.note, MAX_TOPIC_DESCRIPTION_LENGTH),\n      avatar: makeImageUrl(topic.public ? topic.public.photo : null),\n      trustedBadges: badges,\n      private: truncateString(topic.private && topic.private.comment, MAX_TITLE_LENGTH),\n      archived: topic.isArchived(),\n      address: topic.name,\n      groupTopic: topic.isGroupType(),\n      isSelf: isSelf,\n      channel: topic.isChannelType() || topic.chan,\n      access: acs ? acs.getMode() : undefined,\n      modeGiven: acs ? acs.getGiven() : undefined,\n      modeWant: acs ? acs.getWant() : undefined,\n      auth: defacs.auth,\n      anon: defacs.anon\n    });\n  }\n\n  resetTags(topic) {\n    if (topic.getType() != 'grp') {\n      return;\n    }\n\n    const acs = topic.getAccessMode();\n    if (acs && acs.isOwner()) {\n      // Requesting tags: owner is editing the topic.\n      topic.getMeta(topic.startMetaQuery().withTags().build());\n    }\n  }\n\n  onMetaDesc(desc) {\n    const topic = this.props.tinode.getTopic(this.props.topic);\n    if (!topic) {\n      return;\n    }\n    this.resetDesc(topic, this.props);\n\n    if (this.previousMetaDesc && this.previousMetaDesc != this.onMetaDesc) {\n      this.previousMetaDesc(desc);\n    }\n  }\n\n  onSubsUpdated(subs) {\n    const topic = this.props.tinode.getTopic(this.props.topic);\n    if (!topic) {\n      return;\n    }\n    this.resetSubs(topic, this.props);\n\n    if (this.previousSubsUpdated && this.previousSubsUpdated != this.onSubsUpdated) {\n      this.previousSubsUpdated(subs);\n    }\n  }\n\n  handleImageChanged(mime, img) {\n    this.setState({avatar: img});\n    this.props.onTopicDescUpdate(this.props.topic, new TheCard(null, img || Tinode.DEL_CHAR), null);\n  }\n\n  handleMuted(ignored, checked) {\n    this.setState({muted: checked});\n    this.props.onChangePermissions(this.props.topic, checked ? '-P' : '+P');\n  }\n\n  handleUnarchive(ignored, ignored2) {\n    this.props.onTopicUnArchive(this.props.topic);\n  }\n\n  handlePermissionsChanged(which, perm) {\n    switch (which) {\n      case 'auth':\n        this.props.onTopicDescUpdateRequest(this.props.topic, null, null, {auth: perm});\n        break;\n      case 'anon':\n        this.props.onTopicDescUpdateRequest(this.props.topic, null, null, {anon: perm});\n        break;\n      case 'mode':\n      case 'want':\n        this.props.onChangePermissions(this.props.topic, perm);\n        break;\n      case 'given':\n        this.props.onChangePermissions(this.props.topic, perm, this.props.topic);\n        break;\n      case 'user':\n        this.props.onChangePermissions(this.props.topic, perm, this.state.userPermissionsEdited);\n        break;\n    }\n\n    this.handleBackNavigate();\n  }\n\n  handleLaunchPermissionsEditor(which, uid) {\n    const {formatMessage} = this.props.intl;\n    let toEdit, toCompare, toSkip, titleEdit, titleCompare, userTitle, userAvatar;\n    switch (which) {\n      case 'mode':\n        toEdit = this.state.access;\n        break;\n      case 'want':\n        toEdit = this.state.modeWant;\n        toCompare = this.state.modeGiven;\n        if (this.state.owner) {\n          // Don't allow owner to unset 'O' permission. All other permissions are OK.\n          toSkip = 'O';\n        } else {\n          // Allow accepting any of 'ASDO' permissions but don't allow asking for them.\n          toSkip = AccessMode.encode(AccessMode.diff('ASDO', this.state.modeGiven));\n          if (this.state.channel) {\n            // Channels are read-only.\n            toSkip += 'W';\n          }\n        }\n        titleEdit = formatMessage(messages.perm_want);\n        titleCompare = formatMessage(messages.perm_given);\n        break;\n      case 'given':\n        toEdit = this.state.modeGiven2;\n        toCompare = this.state.modeWant2;\n        toSkip = this.state.groupTopic ? (this.state.owner ? '' : 'O') : 'ASDO';\n        titleEdit = formatMessage(messages.perm_given);\n        titleCompare = formatMessage(messages.perm_want);\n        break;\n      case 'auth':\n        toEdit = this.state.auth;\n        toSkip = 'O';\n        break;\n      case 'anon':\n        toEdit = this.state.anon;\n        toSkip = 'O';\n        break;\n      case 'user': {\n        const topic = this.props.tinode.getTopic(this.props.topic);\n        if (!topic) {\n          return;\n        }\n        const user = topic.subscriber(uid);\n        if (!user || !user.acs) {\n          return;\n        }\n        toEdit = user.acs.getGiven();\n        toCompare = user.acs.getWant();\n        toSkip = this.state.owner ? '' : 'O';\n        titleEdit = formatMessage(messages.perm_given);\n        titleCompare = formatMessage(messages.perm_want);\n        if (user.public) {\n          userTitle = user.public.fn;\n          userAvatar = user.public.photo;\n        }\n        break;\n      }\n      default:\n        console.error(\"Unknown permission editing mode '\" + which + \"'\");\n        return;\n    }\n    this.setState({\n      userPermissionsEdited: uid,\n      userPermissionsTitle: userTitle,\n      userPermissionsAvatar: userAvatar,\n      editedPermissions: toEdit,\n      immutablePermissions: toCompare,\n      editedPermissionsTitle: titleEdit,\n      immutablePermissionsTitle: titleCompare,\n      editedPermissionsSkipped: toSkip,\n    });\n    this.props.onNavigate(`perm/${which}`);\n  }\n\n  handleShowQRCode(e) {\n    e.preventDefault();\n    this.props.onNavigate('qrcode');\n  }\n\n  handleCopyToClipboard(e, text) {\n    e.preventDefault();\n    navigator.clipboard.writeText(text).then(_ => {\n      this.setState({toast: this.props.intl.formatMessage(messages.text_copied)});\n      setTimeout(_ => { this.setState({toast: ''}); }, TOAST_DURATION);\n    });\n  }\n\n  handleShare(e) {\n    e.preventDefault();\n    const card = new TheCard(this.state.fullName, this.state.avatar, null, this.state.description);\n    TheCard.setTinodeID(card, Tinode.URI_TOPIC_ID_PREFIX + this.props.topic);\n    this.props.onShareTheCard(card);\n  }\n\n  handleShowAddMembers(e) {\n    e.preventDefault();\n    this.props.onInitFind();\n    this.props.onNavigate('members');\n  }\n\n  handleMemberUpdateRequest(members, added, removed) {\n    this.props.onMemberUpdateRequest(this.props.topic, added, removed);\n    this.props.onNavigate('info');\n  }\n\n  handleMemberSelected(uid) {\n    this.setState({selectedContact: uid});\n  }\n\n  handleUpdateReactions(reactConfig) {\n    const topic = this.props.tinode.getTopic(this.props.topic);\n    if (!topic) {\n      return;\n    }\n    // Update aux with new reaction config\n    topic.setMeta({\n      aux: {\n        react: reactConfig\n      }\n    }).then(() => {\n      this.props.onNavigate('info');\n    }).catch(err => {\n      this.props.onError(err.message, 'err');\n    });\n  }\n\n  handleBackNavigate() {\n    const args = (this.props.panel || 'info').split('/');\n    if (args[0] == 'info') {\n      this.props.onNavigate(null);\n    } else if (args[0] == 'perm') {\n      if (args[1] == 'user') {\n        this.props.onNavigate('info');\n      } else {\n        this.props.onNavigate('security');\n      }\n    } else {\n      this.props.onNavigate('info');\n    }\n  }\n\n  handleContextMenu(params) {\n    const {formatMessage} = this.props.intl;\n    const topic = this.props.tinode.getTopic(this.props.topic);\n    if (!topic) {\n      return;\n    }\n    const user = topic.subscriber(params.topicName);\n    if (!user || !user.acs) {\n      return;\n    }\n\n    const isMe = this.props.tinode.isMe(params.topicName);\n    const menuItems = [{\n      title: formatMessage(messages.edit_permissions),\n      handler: _ => this.handleLaunchPermissionsEditor(isMe ? 'want' : 'user', params.topicName)\n    }];\n    if (!isMe) {\n      menuItems.push('member_delete');\n    }\n    menuItems.push(user.acs.isMuted() ? 'member_unmute' : 'member_mute');\n    if (!isMe) {\n      menuItems.push(user.acs.isJoiner() ? 'member_block' : 'member_unblock');\n    }\n    this.props.showContextMenu({\n      topicName: this.props.topic,\n      x: params.x,\n      y: params.y,\n      user: params.topicName}, menuItems);\n  }\n\n  render() {\n    const args = (this.props.panel || 'info').split('/');\n    const view = args[0];\n    args.shift();\n\n    const {formatMessage} = this.props.intl;\n    const panelTitle = formatMessage((view == 'perm' ? messages['perm_' + args[0]] : messages[view])\n      || messages['info']);\n\n    const topic = this.props.tinode.getTopic(this.state.topic);\n    const alias = topic && topic.alias();\n    const reactions = this.props.tinode.getServerParam('reactions');\n\n    return (\n      <div id=\"info-view\">\n        <div className={`toast${this.state.toast ? ' show' : ''}`}>{this.state.toast}</div>\n        <div className=\"caption-panel\" id=\"info-caption-panel\">\n          <div className=\"panel-title\" id=\"info-title\">{panelTitle}</div>\n          <div>\n            <MenuCancel onCancel={this.handleBackNavigate} />\n          </div>\n        </div>\n        {this.props.displayMobile ?\n          <ErrorPanel\n            level={this.props.errorLevel}\n            text={this.props.errorText}\n            onClearError={this.props.onError} /> : null}\n        {view == 'members' ?\n          <GroupManager\n            tinode={this.props.tinode}\n            members={this.state.contactList}\n            requiredMember={this.props.myUserId}\n            keepInitialMembers={!this.state.admin && !this.state.owner}\n            myUserId={this.props.myUserId}\n            contacts={this.props.searchableContacts}\n            onCancel={this.handleBackNavigate}\n            onSubmit={this.handleMemberUpdateRequest} />\n          :\n        view == 'perm' && args.length > 0 ?\n          <PermissionsEditor\n            tinode={this.props.tinode}\n            mode={this.state.editedPermissions}\n            compare={this.state.immutablePermissions}\n            skip={this.state.editedPermissionsSkipped}\n            modeTitle={this.state.editedPermissionsTitle}\n            compareTitle={this.state.immutablePermissionsTitle}\n            userTitle={this.state.userPermissionsTitle}\n            item={this.state.userPermissionsEdited}\n            userAvatar={this.state.userPermissionsAvatar}\n            onSubmit={(mode) => this.handlePermissionsChanged(args[0], mode)}\n            onCancel={this.handleBackNavigate} />\n          :\n        view == 'general' ?\n          <TopicCommonView\n            tinode={this.props.tinode}\n            topic={this.props.topic}\n            reqCredMethod={this.props.reqCredMethod}\n            onCredAdd={this.props.onCredAdd}\n            onUpdateTagsRequest={this.props.onTopicTagsUpdateRequest}\n            onCredConfirm={this.props.onCredConfirm}\n            onCredDelete={this.props.onCredDelete}\n            onUpdateTopicDesc={this.props.onTopicDescUpdateRequest}\n            onError={this.props.onError} />\n          :\n        view == 'security' ?\n          <TopicSecurity\n            topic={this.props.topic}\n            owner={this.state.owner}\n            admin={this.state.admin}\n            sharer={this.state.sharer}\n            deleter={this.state.deleter}\n            muted={this.state.muted}\n\n            groupTopic={this.state.groupTopic}\n            channel={this.state.channel}\n            access={this.state.access}\n            modeGiven={this.state.modeGiven}\n            modeWant={this.state.modeWant}\n            modeGiven2={this.state.modeGiven2}\n            modeWant2={this.state.modeWant2}\n            auth={this.state.auth}\n            anon={this.state.anon}\n\n            onShowAlert={this.props.onShowAlert}\n            onDeleteMessages={this.props.onDeleteMessages}\n            onLeaveTopic={this.props.onLeaveTopic}\n            onBlockTopic={this.props.onBlockTopic}\n            onReportTopic={this.props.onReportTopic}\n            onLaunchPermissionsEditor={this.handleLaunchPermissionsEditor}\n            onNavigate={this.props.onNavigate} />\n          :\n        view == 'qrcode' ?\n          <ShowQRCode\n            uri={Tinode.URI_TOPIC_ID_PREFIX + this.props.topic}\n            onCancel={this.handleBackNavigate} />\n          :\n        view == 'reactions' ?\n          <TopicReactions\n            react={topic ? topic.aux('react') : null}\n            availableReactions={reactions}\n            maxReactions={this.props.tinode.getServerParam('maxReactions')}\n            onUpdateReactions={this.handleUpdateReactions}\n            onCancel={this.handleBackNavigate} />\n          :\n          <div id=\"info-view-content\" className=\"scrollable-panel\">\n            <div className=\"panel-form-column\">\n              {!this.state.isSelf ?\n                <a href=\"#\" className=\"flat-button float-right\" onClick={e => {e.preventDefault(); this.props.onNavigate('general');}}>\n                  <i className=\"m-icon\">edit</i>&nbsp;\n                  <FormattedMessage id=\"button_edit\" defaultMessage=\"Edit\" description=\"Call to action [Edit]\" />\n                </a>\n                : null\n              }\n              <center>\n                <AvatarUpload\n                  tinode={this.props.tinode}\n                  avatar={this.state.avatar}\n                  readOnly={true}\n                  uid={this.props.topic}\n                  title={this.state.fullName} />\n              </center>\n              <div className=\"group\">\n                <div><label className=\"small\">\n                  <FormattedMessage id=\"label_topic_name\" defaultMessage=\"Name\"\n                    description=\"Label for editing topic name\" />\n                </label></div>\n                <div className=\"large ellipsized\">{this.state.fullName}&nbsp;\n                {this.state.channel ? <i className=\"m-icon\">podcasts</i> : null}</div>\n              </div>\n              {this.state.private ?\n                <div className=\"group\">\n                  <div><label className=\"small\">\n                    <FormattedMessage id=\"label_private\" defaultMessage=\"Private comment\"\n                      description=\"Label for editing 'private'\" />\n                  </label></div>\n                  <div className=\"large ellipsized\">{this.state.private}</div>\n                </div>\n                : null\n              }\n              {!this.state.isSelf ?\n                <>\n                <div className=\"panel-form-row\">\n                  <div>\n                    <label className=\"small\"><FormattedMessage id=\"label_user_id\" defaultMessage=\"ID:\"\n                      description=\"Label for user address (ID)\" /></label>&nbsp;\n                    <tt>{this.state.address}</tt>\n                  </div>\n                  <div style={{marginLeft: 'auto'}}>\n                    &nbsp;<a href=\"#\" onClick={e => {this.handleCopyToClipboard(e, this.state.address);}}>\n                      <i className=\"m-icon\">content_copy</i>\n                    </a>&nbsp;\n                    &nbsp;<a href=\"#\" onClick={this.handleShowQRCode}>\n                      <i className=\"m-icon\">qr_code</i>\n                    </a>&nbsp;\n                    &nbsp;<a href=\"#\" onClick={this.handleShare}>\n                      <i className=\"material-icons\">share</i>\n                    </a>&nbsp;\n                  </div>\n                </div>\n                {alias ?\n                  <div className=\"panel-form-row\">\n                    <div>\n                      <label className=\"small\"><FormattedMessage id=\"label_alias\" defaultMessage=\"Alias:\"\n                        description=\"Label for user or topic alias\" /></label>&nbsp;\n                      <tt>{alias}</tt>\n                    </div>\n                    <div style={{marginLeft: 'auto'}}>\n                      &nbsp;<a href=\"#\" onClick={e => {this.handleCopyToClipboard(e, alias);}}>\n                        <i className=\"m-icon\">content_copy</i>\n                      </a>&nbsp;\n                      &nbsp;<i className=\"m-icon\" style={{opacity: 0}}>qr_code</i>&nbsp;\n                    </div>\n                  </div>\n                : null}\n                </>\n                : null\n              }\n              {this.state.trustedBadges.length > 0 ?\n                <div className=\"group\">\n                  <BadgeList trustedBadges={this.state.trustedBadges} />\n                </div>\n                : null\n              }\n              {this.state.groupTopic && topic.subcnt > 0 ?\n                <div className=\"group\"><label className=\"small\">\n                  {this.state.channel ?\n                    <FormattedMessage id=\"label_subscriber_count\"\n                      defaultMessage=\"Subscribers:\"\n                      description=\"Label for the count of channel subscribers\" />\n                      :\n                    <FormattedMessage id=\"label_member_count\"\n                      defaultMessage=\"Members:\"\n                      description=\"Label for the count of group topic members\" />\n                  }\n                </label>&nbsp;<FormattedNumber value={topic.subcnt}/></div>\n                : null\n              }\n              {this.state.description ?\n                <div className=\"group\">\n                  <label className=\"small\">\n                    <FormattedMessage id=\"label_description\" defaultMessage=\"Description\"\n                      description=\"Label for description of user or topic\" />\n                  </label>\n                  <div>{this.state.description}</div>\n                </div> : null}\n            </div>\n            {!this.state.isSelf ?\n              <><div className=\"hr\" />\n              <div className=\"panel-form-row\">\n                <label>\n                  <FormattedMessage id=\"label_muting_topic\" defaultMessage=\"Muted:\"\n                    description=\"Label for Muting/unmuting the topic\" />\n                </label>\n                <CheckBox name=\"P\" checked={this.state.muted} onChange={this.handleMuted} />\n              </div></>\n              : null\n            }\n            {this.state.archived ?\n              <div className=\"panel-form-row\">\n                <label>\n                  <FormattedMessage id=\"label_unarchive_topic\" defaultMessage=\"Archived:\"\n                    description=\"Label for unarchiving the topic\" />\n                </label>\n                <CheckBox name=\"archived\" checked={true} onChange={this.handleUnarchive} />\n              </div>\n              :\n              null\n            }\n            {!this.state.isSelf ?\n              <><div className=\"hr\" />\n              {this.state.groupTopic && this.state.admin && reactions ?\n                <div className=\"panel-form-row\">\n                  <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.props.onNavigate('reactions');}}>\n                    <i className=\"m-icon\">thumb_up_off_alt</i>&nbsp;<FormattedMessage id=\"button_reactions\"\n                      defaultMessage=\"Reactions\" description=\"Navigation button for reactions panel.\" />\n                  </a>\n                </div>\n                : null\n              }\n              <div className=\"panel-form-row\">\n                <a href=\"#\" className=\"flat-button\" onClick={(e) => {e.preventDefault(); this.props.onNavigate('security');}}>\n                  <i className=\"m-icon\">security</i>&nbsp;<FormattedMessage id=\"button_security\"\n                    defaultMessage=\"Security\" description=\"Navigaton button for security panel.\" />\n                </a>\n              </div></>\n              : null\n            }\n            {this.state.groupTopic && this.state.sharer ?\n              <>\n                <div className=\"hr\" />\n                <div className=\"panel-form-row\">\n                  <label className=\"small\">\n                    <FormattedMessage id=\"label_group_members\" defaultMessage=\"Group members:\"\n                      description=\"Section title or label\" />\n                  </label>\n                </div>\n                <div className=\"panel-form-row\">\n                  <a href=\"#\" className=\"flat-button\" onClick={this.handleShowAddMembers}>\n                    <i className=\"m-icon\">person_add</i> &nbsp;<FormattedMessage id=\"button_add_members\"\n                      defaultMessage=\"Add members\" description=\"Flat button [Add members] (to topic)\" />\n                  </a>\n                </div>\n                <FormattedMessage id=\"group_has_no_members\" defaultMessage=\"No members\"\n                  description=\"Shown in place of group members\">{\n                  (no_members) => <ContactList\n                    tinode={this.props.tinode}\n                    contacts={this.state.contactList}\n                    myUserId={this.props.myUserId}\n                    emptyListMessage={no_members}\n                    topicSelected={this.state.selectedContact}\n                    showOnline={false}\n                    showUnread={false}\n                    showMode={true}\n                    noScroll={true}\n                    onTopicSelected={this.handleMemberSelected}\n                    showContextMenu={this.state.admin ? this.handleContextMenu : false}\n                  />\n                }</FormattedMessage>\n              </>\n              :\n              null\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n};\n\nexport default injectIntl(InfoView);\n","// PermissionsEditor: Component for editing permissions\n// <PermissionsEditor mode=\"JWROD\" skip=\"O\" onChange={this.handleCheckboxTest} />\nimport React from 'react';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\n\nimport CheckBox from './checkbox.jsx';\nimport Contact from './contact.jsx';\n\nimport { makeImageUrl } from '../lib/blob-helpers.js';\n\n// Translatable permission names.\nconst messages = defineMessages({\n  joiner: {\n    id: 'permission_join',\n    defaultMessage: \"Join ({val})\",\n    description: 'Name of J permission'\n  },\n  reader: {\n    id: 'permission_read',\n    defaultMessage: \"Read ({val})\",\n    description: 'Name of R permission'\n  },\n  writer: {\n    id: 'permission_write',\n    defaultMessage: \"Write ({val})\",\n    description: 'Name of W permission'\n  },\n  preser: {\n    id: 'permission_pres',\n    defaultMessage: \"Get notified ({val})\",\n    description: 'Name of P permission'\n  },\n  approver: {\n    id: 'permission_admin',\n    defaultMessage: \"Approve ({val})\",\n    description: 'Name of A permission'\n  },\n  sharer: {\n    id: 'permission_share',\n    defaultMessage: \"Share ({val})\",\n    description: 'Name of S permission'\n  },\n  deleter: {\n    id: 'permission_delete',\n    defaultMessage: \"Delete ({val})\",\n    description: 'Name of D permission'\n  },\n  owner: {\n    id: 'permission_owner',\n    defaultMessage: \"Owner ({val})\",\n    description: 'Name of O permission'\n  }\n});\n\nclass PermissionsEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mode: (props.mode || '').replace('N', '')\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  handleChange(val) {\n    let mode = this.state.mode;\n    const idx = mode.indexOf(val);\n    if (idx == -1) {\n      mode += val;\n    } else {\n      mode = mode.replace(val, '');\n    }\n    this.setState({mode: mode});\n  }\n\n  handleSubmit() {\n    // Normalize string, otherwise cannot check if mode has changed.\n    const mode = (this.state.mode || 'N').split('').sort().join('');\n    const before = (this.props.mode || 'N').split('').sort().join('')\n    if (mode !== before) {\n      this.props.onSubmit(mode);\n    } else {\n      this.props.onCancel();\n    }\n  }\n\n  handleCancel() {\n    this.props.onCancel();\n  }\n\n  render() {\n    const {formatMessage} = this.props.intl;\n    const all = 'JRWPASDO';\n    const names = {\n      'J': formatMessage(messages.joiner, {val: 'J'}),\n      'R': formatMessage(messages.reader, {val: 'R'}),\n      'W': formatMessage(messages.writer, {val: 'W'}),\n      'P': formatMessage(messages.preser, {val: 'P'}),\n      'A': formatMessage(messages.approver, {val: 'A'}),\n      'S': formatMessage(messages.sharer, {val: 'S'}),\n      'D': formatMessage(messages.deleter, {val: 'D'}),\n      'O': formatMessage(messages.owner, {val: 'O'})\n    };\n\n    let skip = this.props.skip || '';\n    let mode = this.state.mode;\n    let compare = (this.props.compare || '').replace('N', '');\n    let items = [];\n    for (let i=0; i<all.length; i++) {\n      let c = all.charAt(i);\n      if (skip.indexOf(c) >= 0 && mode.indexOf(c) < 0) {\n        // Permission is marked as inactive: hide unchecked permissions, disable checked permissions\n        continue;\n      }\n      items.push(\n        <tr key={c}>\n          <td>{names[c]}</td>\n          <td className=\"checkbox\">{skip.indexOf(c) < 0 ?\n            <CheckBox name={c} checked={(mode.indexOf(c) >= 0)} onChange={this.handleChange}/>\n            :\n            <CheckBox name={c} checked={(mode.indexOf(c) >= 0)} />\n          }</td>{this.props.compare ? <td className=\"checkbox\">\n            <CheckBox name={c} checked={(compare.indexOf(c) >= 0)}/>\n          </td> : null}\n        </tr>\n      );\n    }\n\n    return (\n      <div className=\"panel-form-column\">\n        {this.props.userTitle ?\n          <ul className=\"contact-box small\"><Contact\n            tinode={this.props.tinode}\n            item={this.props.item}\n            title={this.props.userTitle}\n            small={true}\n            avatar={makeImageUrl(this.props.userAvatar ? this.props.userAvatar : null)} /></ul> : null}\n        <label className=\"small\"><FormattedMessage id=\"title_permissions\"\n          defaultMessage=\"Permissions\" description=\"Section title\"/></label>\n        <table className=\"permission-editor\">\n        {this.props.compare ?\n          <thead><tr>\n            <th></th><th>{this.props.modeTitle}</th>\n            <th>{this.props.compareTitle}</th>\n          </tr></thead> :\n          null}\n        <tbody>\n          {items}\n        </tbody></table>\n        <br />\n        <div className=\"dialog-buttons\">\n          <button className=\"outline\" onClick={this.handleCancel}>\n            <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\n          </button>\n          <button className=\"primary\" onClick={this.handleSubmit}>\n            <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default injectIntl(PermissionsEditor);\n"],"names":["messages","defineMessages","no_contacts","id","defaultMessage","contacts_not_found_short","GroupManager","React","constructor","props","super","this","state","members","index","indexMembers","staticMembers","keepInitialMembers","requiredMember","contactFilter","noContactsMessage","intl","formatMessage","selectedContacts","handleContactSelected","bind","handleMemberRemoved","handleContactFilter","handleSubmit","handleCancel","forEach","m","user","delta","present","keepInitial","stat","push","sel","userId","status","slice","contacts","i","setState","splice","val","msg","query","doContactFiltering","filter","values","length","indexOf","added","removed","Object","keys","k","onSubmit","onCancel","render","className","FormattedMessage","ChipInput","tinode","chips","prompt","filterFunc","onChipRemoved","ContactList","myUserId","topicSelected","emptyListMessage","showOnline","showUnread","onTopicSelected","onClick","injectIntl","ShowQRCode","qrCodeRef","componentDidMount","QRCode","current","text","uri","width","QRCODE_SIZE","height","ref","clear_messages","clear_messages_warning","delete_messages","delete_messages_warning","topic_delete","topic_delete_warning","leave_chat","leave_chat_warning","block_contact","block_contact_warning","report_chat","report_chat_warning","other_user","TopicSecurity","handleDeleteTopic","handleDeleteMessages","handleLeave","handleBlock","handleReport","e","preventDefault","onShowAlert","_","onDeleteTopic","topic","deleter","onDeleteMessages","onLeaveTopic","onBlockTopic","onReportTopic","channel","href","owner","groupTopic","onLaunchPermissionsEditor","access","auth","anon","fullName","modeGiven2","TopicReactions","currentReactions","react","vals","currentMax","max","selectedReactions","maxPerMessage","handleReactionToggle","handleMaxChange","handleSave","value","parseInt","target","sliderMax","emoji","selected","idx","maxReactions","reactConfig","onUpdateReactions","availableReactions","originalVals","originalMax","hasChanges","JSON","stringify","sliderValue","Math","min","htmlFor","type","onChange","disabled","map","key","title","isSelected","includes","isDisabled","info","general","security","crop","perm_want","perm_given","perm_auth","perm_anon","perm_user","edit_permissions","qrcode","reactions","text_copied","self_topic_name","self_topic_comment","InfoView","admin","sharer","muted","address","undefined","isSelf","description","avatar","private","selectedContact","modeGiven","modeWant","modeWant2","contactList","trustedBadges","previousMetaDesc","previousSubsUpdated","propsUpdated","resetSubs","resetDesc","resetTags","onMetaDesc","onSubsUpdated","handleImageChanged","handleMuted","handleUnarchive","handlePermissionsChanged","handleLaunchPermissionsEditor","handleShowQRCode","handleCopyToClipboard","handleShare","handleShowAddMembers","handleMemberUpdateRequest","handleMemberSelected","handleUpdateReactions","handleContextMenu","handleBackNavigate","getTopic","componentDidUpdate","componentWillUnmount","newState","getType","user2","subscriber","acs","getGiven","getWant","NO_ACCESS_MODE","subscribers","sub","defacs","getDefaultAccess","getAccessMode","badges","trusted","entries","isSelfType","isOwner","isAdmin","isSharer","isDeleter","isMuted","truncateString","public","fn","MAX_TITLE_LENGTH","note","MAX_TOPIC_DESCRIPTION_LENGTH","makeImageUrl","photo","comment","archived","isArchived","name","isGroupType","isChannelType","chan","getMode","getMeta","startMetaQuery","withTags","build","desc","subs","mime","img","onTopicDescUpdate","TheCard","Tinode","DEL_CHAR","ignored","checked","onChangePermissions","ignored2","onTopicUnArchive","which","perm","onTopicDescUpdateRequest","userPermissionsEdited","uid","toEdit","toCompare","toSkip","titleEdit","titleCompare","userTitle","userAvatar","AccessMode","encode","diff","console","error","userPermissionsTitle","userPermissionsAvatar","editedPermissions","immutablePermissions","editedPermissionsTitle","immutablePermissionsTitle","editedPermissionsSkipped","onNavigate","navigator","clipboard","writeText","then","toast","setTimeout","TOAST_DURATION","card","setTinodeID","URI_TOPIC_ID_PREFIX","onShareTheCard","onInitFind","onMemberUpdateRequest","setMeta","aux","catch","err","onError","message","args","panel","split","params","topicName","isMe","menuItems","handler","isJoiner","showContextMenu","x","y","view","shift","panelTitle","alias","getServerParam","MenuCancel","displayMobile","ErrorPanel","level","errorLevel","errorText","onClearError","searchableContacts","PermissionsEditor","mode","compare","skip","modeTitle","compareTitle","item","TopicCommonView","reqCredMethod","onCredAdd","onUpdateTagsRequest","onTopicTagsUpdateRequest","onCredConfirm","onCredDelete","onUpdateTopicDesc","AvatarUpload","readOnly","style","marginLeft","opacity","BadgeList","subcnt","FormattedNumber","CheckBox","no_members","showMode","noScroll","joiner","reader","writer","preser","approver","replace","handleChange","sort","join","all","names","items","c","charAt","Contact","small"],"ignoreList":[],"sourceRoot":""}