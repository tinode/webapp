{"version":3,"file":"472.prod.js","mappings":"qNAce,MAAMA,UAAmBC,IAAAA,cACtCC,WAAAA,CAAYC,GACVC,MAAMD,GAENE,KAAKC,cAAgBD,KAAKC,cAAcC,KAAKF,MAC7CA,KAAKG,cAAgBH,KAAKG,cAAcD,KAAKF,KAC/C,CAEAI,iBAAAA,GACEC,SAASC,iBAAiB,UAAWN,KAAKG,cAC5C,CAEAI,oBAAAA,GACEF,SAASG,oBAAoB,UAAWR,KAAKG,cAC/C,CAEAA,aAAAA,CAAcM,GACZA,EAAEC,iBACY,WAAVD,EAAEE,KACJX,KAAKF,MAAMc,SAEf,CAEAX,aAAAA,CAAcY,GACZb,KAAKF,MAAMc,UACXZ,KAAKF,MAAMgB,cAAcd,KAAKF,MAAMiB,QAAQC,KAC9C,CAEAC,MAAAA,GACE,OAAKjB,KAAKF,MAAMiB,QAIdnB,IAAAA,cAAA,OAAKsB,GAAG,iBACNtB,IAAAA,cAAA,OAAKsB,GAAG,yBACNtB,IAAAA,cAAA,YAAOI,KAAKF,MAAMiB,QAAQI,MAC1BvB,IAAAA,cAAA,KAAGwB,KAAK,IAAIC,QAAUZ,IAAOA,EAAEC,iBAAkBV,KAAKF,MAAMc,YAAahB,IAAAA,cAAA,KAAG0B,UAAU,eAAc,WAEtG1B,IAAAA,cAAA,OAAKsB,GAAG,2BACNtB,IAAAA,cAAA,OAAK0B,UAAU,YACb1B,IAAAA,cAAA,KAAG0B,UAAU,eA/CzB,SAAsBC,GAEpB,MAAMC,EAAa,CAACC,QAAS,QAASC,MAAO,QAASC,KAAM,cAAeC,MAAO,YAElF,OAAOJ,EAAWD,IAASC,GAAYD,GAAQ,IAAIM,MAAM,KAAK,KAAOL,EAAoB,OAC3F,CA0CwCM,CAAa9B,KAAKF,MAAMiB,QAAQgB,OAC5DnC,IAAAA,cAAA,WAAKA,IAAAA,cAAA,SAAGA,IAAAA,cAACoC,EAAAA,iBAAgB,CAACd,GAAE,kBAAmBe,eAAc,iCACjB,KAAEC,EAAAA,EAAAA,IAAgBlC,KAAKF,MAAMiB,QAAQI,KAAM,KAAO,KAC9FvB,IAAAA,cAAA,WAAKA,IAAAA,cAAA,SAAGA,IAAAA,cAACoC,EAAAA,iBAAgB,CAACd,GAAE,qBAAsBe,eAAc,oCACP,IAAEjC,KAAKF,MAAMiB,QAAQgB,MAAQ,4BACtFnC,IAAAA,cAAA,WAAKA,IAAAA,cAAA,SAAGA,IAAAA,cAACoC,EAAAA,iBAAgB,CAACd,GAAE,aAAce,eAAc,4BACd,KAAEE,EAAAA,EAAAA,IAAiBnC,KAAKF,MAAMiB,QAAQqB,SAGpFxC,IAAAA,cAACyC,EAAAA,EAAW,CACVC,SAAS,EACTC,OAAQvC,KAAKF,MAAMyC,OACnBC,MAAOxC,KAAKF,MAAM0C,MAClBC,cAAezC,KAAKF,MAAM2C,cAC1B3B,cAAed,KAAKC,cACpByC,QAAS1C,KAAKF,MAAM4C,WAzBjB,IA4BX,E","sources":["webpack://tinode-webapp/./src/widgets/doc-preview.jsx"],"sourcesContent":["import React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport SendMessage from '../widgets/send-message.jsx';\n\nimport { bytesToHumanSize, shortenFileName } from '../lib/strformat.js';\n\n// Get material icon name from mime type.\nfunction iconFromMime(mime) {\n  // If more icons become available in material icons, add them to this mime-to-icon mapping.\n  const mimeToIcon = {default: 'draft', image: 'image', text: 'description', video: 'theaters'};\n\n  return mimeToIcon[mime] || mimeToIcon[(mime || '').split('/')[0]] || mimeToIcon['default'];\n}\n\nexport default class DocPreview extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.handleSendDoc = this.handleSendDoc.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown(e) {\n    e.preventDefault();\n    if (e.key === 'Escape') {\n      this.props.onClose();\n    }\n  }\n\n  handleSendDoc(caption) {\n    this.props.onClose();\n    this.props.onSendMessage(this.props.content.file);\n  }\n\n  render() {\n    if (!this.props.content) {\n      return null;\n    }\n    return (\n      <div id=\"image-preview\">\n        <div id=\"preview-caption-panel\">\n          <span>{this.props.content.name}</span>\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onClose();}}><i className=\"m-icon gray\">close</i></a>\n        </div>\n        <div id=\"image-preview-container\">\n          <div className=\"doc-card\">\n            <i className=\"m-icon gray\">{iconFromMime(this.props.content.type)}</i>\n            <div><b><FormattedMessage id=\"label_file_name\" defaultMessage=\"File name:\"\n              description=\"Label for a file name\" /></b> {shortenFileName(this.props.content.name, 24) || '-'}</div>\n            <div><b><FormattedMessage id=\"label_content_type\" defaultMessage=\"Content type:\"\n              description=\"Label for file content type (mime)\" /></b> {this.props.content.type || 'application/octet-stream'}</div>\n            <div><b><FormattedMessage id=\"label_size\" defaultMessage=\"Size:\"\n              description=\"Label for file size\" /></b> {bytesToHumanSize(this.props.content.size)}</div>\n          </div>\n        </div>\n        <SendMessage\n          noInput={true}\n          tinode={this.props.tinode}\n          reply={this.props.reply}\n          onCancelReply={this.props.onCancelReply}\n          onSendMessage={this.handleSendDoc}\n          onError={this.props.onError} />\n      </div>\n    );\n  }\n};\n"],"names":["DocPreview","React","constructor","props","super","this","handleSendDoc","bind","handleKeyDown","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","e","preventDefault","key","onClose","caption","onSendMessage","content","file","render","id","name","href","onClick","className","mime","mimeToIcon","default","image","text","video","split","iconFromMime","type","FormattedMessage","defaultMessage","shortenFileName","bytesToHumanSize","size","SendMessage","noInput","tinode","reply","onCancelReply","onError"],"ignoreList":[],"sourceRoot":""}