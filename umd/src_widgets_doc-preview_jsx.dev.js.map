{"version":3,"file":"src_widgets_doc-preview_jsx.dev.js","mappings":"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","sources":["webpack://tinode-webapp/./src/widgets/doc-preview.jsx"],"sourcesContent":["import React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport SendMessage from '../widgets/send-message.jsx';\n\nimport { bytesToHumanSize, shortenFileName } from '../lib/strformat.js';\n\n// Get material icon name from mime type.\nfunction iconFromMime(mime) {\n  // If more icons become available in material icons, add them to this mime-to-icon mapping.\n  const mimeToIcon = {default: 'insert_drive_file', image: 'image', text: 'description', video: 'theaters'};\n\n  return mimeToIcon[mime] || mimeToIcon[(mime || '').split('/')[0]] || mimeToIcon['default'];\n}\n\nexport default class DocPreview extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.handleSendDoc = this.handleSendDoc.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown(e) {\n    e.preventDefault();\n    if (e.key === 'Escape') {\n      this.props.onClose();\n    }\n  }\n\n  handleSendDoc(caption) {\n    this.props.onClose();\n    this.props.onSendMessage(this.props.content.file);\n  }\n\n  render() {\n    if (!this.props.content) {\n      return null;\n    }\n    return (\n      <div id=\"image-preview\">\n        <div id=\"preview-caption-panel\">\n          <span>{this.props.content.name}</span>\n          <a href=\"#\" onClick={(e) => {e.preventDefault(); this.props.onClose();}}><i className=\"material-icons gray\">close</i></a>\n        </div>\n        <div id=\"image-preview-container\">\n          <div className=\"doc-card\">\n            <i className=\"material-icons gray\">{iconFromMime(this.props.content.type)}</i>\n            <div><b><FormattedMessage id=\"label_file_name\" defaultMessage=\"File name:\"\n              description=\"Label for a file name\" /></b> {shortenFileName(this.props.content.name, 24) || '-'}</div>\n            <div><b><FormattedMessage id=\"label_content_type\" defaultMessage=\"Content type:\"\n              description=\"Label for file content type (mime)\" /></b> {this.props.content.type || 'application/octet-stream'}</div>\n            <div><b><FormattedMessage id=\"label_size\" defaultMessage=\"Size:\"\n              description=\"Label for file size\" /></b> {bytesToHumanSize(this.props.content.size)}</div>\n          </div>\n        </div>\n        <SendMessage\n          noInput={true}\n          tinode={this.props.tinode}\n          reply={this.props.reply}\n          onCancelReply={this.props.onCancelReply}\n          onSendMessage={this.handleSendDoc}\n          onError={this.props.onError} />\n      </div>\n    );\n  }\n};\n"],"names":["React","FormattedMessage","SendMessage","bytesToHumanSize","shortenFileName","iconFromMime","mime","mimeToIcon","default","image","text","video","split","DocPreview","PureComponent","constructor","props","handleSendDoc","bind","handleKeyDown","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","e","preventDefault","key","onClose","caption","onSendMessage","content","file","render","createElement","id","name","href","onClick","className","type","defaultMessage","size","noInput","tinode","reply","onCancelReply","onError"],"ignoreList":[],"sourceRoot":""}